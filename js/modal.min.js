const modalButton = document.querySelector(".search__button"),
  modal = document.querySelector(".modal"),
  modalArrivalDate = document.querySelector(".arrival-date"),
  modalDepartureDate = document.querySelector(".departure-date"),
  modalQuantityAdults = document.querySelector(".quantity-adults"),
  modalQuantityKids = document.querySelector(".quantity-kids"),
  modalForm = document.querySelector(".modal__form");
let isStorageSupport = !0,
  storageAdults = "",
  storageKids = "";
try {
  (storageAdults = localStorage.getItem("adults")),
    (storageKids = localStorage.getItem("kids"));
} catch (t) {
  isStorageSupport = !1;
}
modalButton.addEventListener("click", function (t) {
  t.preventDefault(),
    modal.classList.remove("modal-error"),
    modal.classList.toggle("modal-show"),
    storageAdults && (modalQuantityAdults.value = storageAdults),
    storageKids && (modalQuantityKids.value = storageKids),
    modalArrivalDate.focus();
}),
  modalForm.addEventListener("submit", function (t) {
    modalArrivalDate.value &&
    modalDepartureDate.value &&
    modalQuantityAdults &&
    modalQuantityKids
      ? isStorageSupport &&
        (localStorage.setItem("adults", modalQuantityAdults.value),
        localStorage.setItem("kids", modalQuantityKids.value))
      : (t.preventDefault(),
        modal.classList.remove("modal-error"),
        (modal.offsetWidth = modal.offsetWidth),
        modal.classList.add("modal-error"));
  }),
  window.addEventListener("keydown", function (t) {
    27 === t.keyCode &&
      modal.classList.contains("modal-show") &&
      (t.preventDefault(),
      modal.classList.remove("modal-show"),
      modal.classList.remove("modal-error"));
  });
